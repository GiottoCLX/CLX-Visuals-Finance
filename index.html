<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>CLX Finance</title>
  <link rel="icon" href="assets/icon.svg" />
  <link rel="stylesheet" href="styles.css" />

  
  <!-- Libraries -->
  <script src="https://unpkg.com/@supabase/supabase-js@2.45.4/dist/umd/supabase.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- Project config (URL + Publishable Key eintragen) -->
  <script src="config.js"></script>
  <script defer src="app.js"></script>
</head>
<body class="theme-light">

  <!-- Sidebar -->
  <aside class="side" id="sidebar">
    <div class="logo">CLX</div>
    <nav class="side-nav">
      <a class="side-btn active" href="#view-dash"      data-go="view-dash"      title="Dashboard">üè†</a>
      <a class="side-btn"         href="#view-tx"        data-go="view-tx"        title="Transaktionen">üí≥</a>
      <a class="side-btn"         href="#view-charts"    data-go="view-charts"    title="Berichte">üìà</a>
      <a class="side-btn"         href="#view-cats"      data-go="view-cats"      title="Konten &amp; Kategorien">üóÇÔ∏è</a>
      <a class="side-btn"         href="#view-budgets"   data-go="view-budgets"   title="Budgets">üéØ</a>
      <a class="side-btn"         href="#view-recurring" data-go="view-recurring" title="Wiederkehrend">üîÅ</a>
      <a class="side-btn"         href="#view-settings"  data-go="view-settings"  title="Einstellungen">‚öôÔ∏è</a>
      <a class="side-btn"         href="#view-help"      data-go="view-help"      title="Hilfe">‚ùî</a>
    </nav>
    <div class="side-bottom">
      <button id="btn-signout" class="side-btn" style="display:none" title="Abmelden">‚éã</button>
    </div>
  </aside>
  <div id="side-backdrop" class="side-backdrop"></div>

  <!-- Main -->
  <main class="main">
    <header class="top">
      <div class="top-left">
        <button id="btn-nav" class="hamburger" aria-label="Men√º">‚ò∞</button>
        <div>
          <h1 class="title" id="view-title">Dashboard</h1>
          <div class="chip-row">
            <button class="chip" data-qf="this_month">Dieser Monat</button>
            <button class="chip" data-qf="last_month">Letzter Monat</button>
            <button class="chip" data-qf="7d">7 Tage</button>
            <button class="chip" data-qf="all">Alle</button>
          </div>
        </div>
      </div>
      <div class="top-right">
        <input id="f-search" class="search" placeholder="Suchen (Beschreibung) ‚Ä¶" />
        <span id="user-email" class="user"></span>
      </div>
    </header>

    <section class="filters">
      <label class="field"><span>Monat</span><input type="month" id="f-month" /></label>
      <label class="field"><span>Konto</span><select id="f-account"></select></label>
      <label class="field"><span>Kategorie</span><select id="f-category"></select></label>
      <div class="filter-actions">
        <button id="btn-refresh" class="btn btn-secondary">Aktualisieren</button>
        <button id="btn-clear" class="btn btn-secondary">Zur√ºcksetzen</button>
      </div>
    </section>

    <!-- VIEWS -->
    <section id="view-dash" class="view show">
      <section class="grid">
        <div class="col-left">
          <div class="cards">
            <div class="card stat"><div class="stat-top"><div class="stat-icon">‚¨ÜÔ∏è</div><div class="stat-name">Einnahmen</div></div><div id="kpi-income" class="stat-value">0.00</div></div>
            <div class="card stat"><div class="stat-top"><div class="stat-icon">‚¨áÔ∏è</div><div class="stat-name">Ausgaben</div></div><div id="kpi-expense" class="stat-value">0.00</div></div>
            <div class="card stat"><div class="stat-top"><div class="stat-icon">‚öñÔ∏è</div><div class="stat-name">Saldo</div></div><div id="kpi-balance" class="stat-value">0.00</div></div>
            <div class="card stat"><div class="stat-top"><div class="stat-icon">üì¶</div><div class="stat-name">Buchungen</div></div><div id="kpi-count" class="stat-value">0</div></div>
          </div>

          <div class="card">
            <div class="card-head"><h2>Letzte Transaktionen</h2></div>
            <div class="table-wrap">
              <table class="table" id="tx-table-dash">
                <thead><tr><th>Datum</th><th>Beschreibung</th><th class="num">¬± CHF</th></tr></thead>
                <tbody></tbody>
              </table>
            </div>
          </div>

          <div class="card">
            <h2>Verlauf &amp; Kategorien</h2>
            <div class="charts">
              <div class="chart-box"><canvas id="chart-balance"></canvas></div>
              <div class="chart-box"><canvas id="chart-cats"></canvas></div>
            </div>
          </div>
        </div>

        <aside class="col-right">
          <div class="card cc">
            <div class="cc-top"><div class="cc-chip"></div><div class="cc-brand">CLX CREDIT</div></div>
            <div class="cc-num">**** **** **** <span id="cc-last">1234</span></div>
            <div class="cc-row">
              <div><div class="cc-label">VERF√úGBAR</div><div id="cc-funds" class="cc-value">CHF 0.00</div></div>
              <div><div class="cc-label">KONTO</div><div id="cc-name" class="cc-value small">‚Äì</div></div>
            </div>
          </div>
          <div class="card"><h2>Geplante Zahlungen</h2><ul id="schedule-list" class="list"></ul></div>
          <div class="card"><h2>Letzte Zahlungen</h2><ul id="recent-list" class="list"></ul></div>
        </aside>
      </section>
    </section>

    <section id="view-tx" class="view">
      <div class="grid">
        <div class="col-left">
          <div class="card">
            <div class="card-head">
              <h2>Transaktionen</h2>
              <div class="row">
                <button id="btn-export" class="btn btn-secondary">Export (CSV)</button>
                <label class="btn btn-outline">Import (CSV)<input type="file" id="file-import" accept=".csv" hidden /></label>
                <label class="field mini"><span>Pro Seite</span>
                  <select id="page-size"><option>10</option><option>25</option><option selected>50</option><option>100</option></select>
                </label>
              </div>
            </div>
            <div class="table-wrap">
              <table class="table" id="tx-table">
                <thead>
                  <tr>
                    <th data-sort="date">Datum</th>
                    <th data-sort="description">Beschreibung</th>
                    <th data-sort="account">Konto</th>
                    <th data-sort="category">Kategorie</th>
                    <th data-sort="type" class="num">Typ</th>
                    <th data-sort="amount" class="num">Betrag</th>
                    <th class="num">Saldo</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            <div class="pager">
              <button id="page-prev" class="btn btn-secondary">‚óÄ</button>
              <span id="page-info" class="muted"></span>
              <button id="page-next" class="btn btn-secondary">‚ñ∂</button>
            </div>
          </div>
        </div>

        <aside class="col-right">
          <div class="card">
            <h2>Neue Buchung</h2>
            <form id="tx-form" class="form">
              <label class="field"><span>Datum</span><input name="date" type="date" required /></label>
              <label class="field"><span>Typ</span><select name="type"><option value="expense">Ausgabe</option><option value="income">Einnahme</option></select></label>
              <label class="field"><span>Betrag (CHF)</span><input name="amount" type="number" step="0.05" inputmode="decimal" required /></label>
              <label class="field"><span>Beschreibung</span><input name="description" placeholder="z. B. Mittagessen / Lohn" required /></label>
              <label class="field"><span>Konto</span><select name="account_id" id="tx-account"></select></label>
              <label class="field"><span>Kategorie</span><select name="category_id" id="tx-category"></select></label>
              <div class="row"><button class="btn">Speichern</button><button type="button" id="btn-reset" class="btn btn-secondary">Reset</button></div>
            </form>
          </div>
        </aside>
      </div>
    </section>

    <section id="view-charts" class="view">
      <div class="card">
        <h2>Berichte</h2>
        <div class="charts">
          <div class="chart-box"><canvas id="chart-balance-2"></canvas></div>
          <div class="chart-box"><canvas id="chart-cats-2"></canvas></div>
        </div>
      </div>
    </section>

    <section id="view-cats" class="view">
      <div class="grid">
        <div class="card">
          <h2>Konten</h2>
          <form id="acc-form" class="inline"><input name="name" placeholder="Neues Konto" /><button class="btn">+ Konto</button></form>
          <ul id="acc-list" class="mini-list"></ul>
        </div>
        <div class="card">
          <h2>Kategorien</h2>
          <form id="cat-form" class="inline"><input name="name" placeholder="Neue Kategorie" /><button class="btn">+ Kategorie</button></form>
          <ul id="cat-list" class="mini-list"></ul>
        </div>
      </div>
    </section>

    <section id="view-budgets" class="view">
      <div class="card">
        <h2>Monatsbudgets</h2>
        <p class="muted small" id="budgets-hint"></p>
        <form id="budget-form" class="inline">
          <input type="month" id="b-month" />
          <select id="b-category"></select>
          <input id="b-amount" type="number" step="1" placeholder="Betrag CHF" />
          <button class="btn">Speichern</button>
        </form>
        <div id="budget-list" class="mini-list"></div>
      </div>
    </section>

    <section id="view-recurring" class="view">
      <div class="card">
        <h2>Wiederkehrende Transaktionen</h2>
        <p class="muted small" id="rec-hint"></p>
        <form id="rec-form" class="grid2">
          <input id="r-start" type="date" />
          <select id="r-every"><option value="monthly">Monatlich</option><option value="weekly">W√∂chentlich</option></select>
          <input id="r-desc" placeholder="Beschreibung" />
          <input id="r-amount" type="number" step="0.05" placeholder="Betrag" />
          <select id="r-account"></select>
          <select id="r-category"></select>
          <div class="row span-2">
            <button id="btn-rec-save" class="btn" type="button">Speichern</button>
            <button id="btn-rec-apply" class="btn btn-secondary" type="button">F√ºr diesen Monat anwenden</button>
          </div>
        </form>
        <ul id="rec-list" class="mini-list"></ul>
      </div>
    </section>

    <section id="view-settings" class="view">
      <div class="card">
        <h2>Einstellungen</h2>
        <div class="grid">
          <div>
            <h3>Darstellung</h3>
            <div class="row"><button id="theme-light" class="btn btn-secondary">Helles Theme</button><button id="theme-dark" class="btn btn-secondary">Dunkles Theme</button></div>
          </div>
          <div>
            <h3>W√§hrung</h3>
            <select id="currency"><option value="CHF">CHF</option><option value="EUR">EUR</option><option value="USD">USD</option></select>
          </div>
          <div>
            <h3>Profil</h3>
            <div class="muted small">Angemeldet als: <span id="settings-email">‚Äì</span></div>
          </div>
        </div>
      </div>
    </section>

    <section id="view-help" class="view">
      <div class="card">
        <h2>Hilfe</h2>
        <ol>
          <li><strong>schema.sql</strong> in Supabase ausf√ºhren.</li>
          <li>In <strong>config.js</strong> URL + Publishable Key eintragen.</li>
          <li>Einloggen ‚Üí Konten &amp; Kategorien anlegen ‚Üí Buchungen erfassen.</li>
        </ol>
      </div>
    </section>
  </main>

  <!-- Auth Overlay -->
  <div id="auth" class="auth">
    <div class="auth-card">
      <h2>Willkommen bei CLX Finance</h2>
      <p class="muted">Melde dich an oder registriere dich, um loszulegen.</p>
      <div class="grid2"><input id="auth-email" placeholder="E-Mail" /><input id="auth-password" type="password" placeholder="Passwort" /></div>
      <div class="row"><button id="btn-signup" class="btn">Registrieren</button><button id="btn-signin" class="btn btn-secondary">Anmelden</button></div>
      <p id="auth-msg" class="muted small"></p>
    </div>
  </div>

  <!-- ganz unten vor </body> -->
<script src="config.js"></script>
<script src="app.js" defer></script>
</body>
</html>

</body>
</html>
